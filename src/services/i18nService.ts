import React from 'react';
// Internationalization service for multi-language support
export interface Translation {
  [key: string]: string | Translation;
}

export interface Language {
  code: string;
  name: string;
  nativeName: string;
  flag: string;
}

export const supportedLanguages: Language[] = [
  { code: 'en', name: 'English', nativeName: 'English', flag: 'üá∫üá∏' },
  { code: 'es', name: 'Spanish', nativeName: 'Espa√±ol', flag: 'üá™üá∏' },
  { code: 'fr', name: 'French', nativeName: 'Fran√ßais', flag: 'üá´üá∑' },
  { code: 'de', name: 'German', nativeName: 'Deutsch', flag: 'üá©üá™' },
  { code: 'it', name: 'Italian', nativeName: 'Italiano', flag: 'üáÆüáπ' },
  { code: 'pt', name: 'Portuguese', nativeName: 'Portugu√™s', flag: 'üáµüáπ' },
  { code: 'ru', name: 'Russian', nativeName: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
  { code: 'zh', name: 'Chinese', nativeName: '‰∏≠Êñá', flag: 'üá®üá≥' },
  { code: 'ja', name: 'Japanese', nativeName: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
  { code: 'ko', name: 'Korean', nativeName: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
  { code: 'ar', name: 'Arabic', nativeName: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', flag: 'üá∏üá¶' },
  { code: 'hi', name: 'Hindi', nativeName: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä', flag: 'üáÆüá≥' }
];

export const translations: { [key: string]: Translation } = {
  en: {
    nav: {
      home: 'Home',
      createVideo: 'Create Video',
      myOrders: 'My Orders',
      admin: 'Admin',
      getStarted: 'Get Started'
    },
    hero: {
      badge: 'Next-Generation AI Video Platform',
      headline: 'Transform Ideas Into',
      headlineHighlight: 'Visual Stories',
      subheadline: 'From training modules to product demos, create professional AI videos that engage, educate, and convert your audience',
      oneTimeProjects: 'One-time projects from $15',
      subscriptions: 'Subscriptions for teams',
      enterprise: 'Enterprise solutions',
      startCreating: 'Start Creating Today',
      seeInAction: 'See Drishya in Action',
      videosCreated: 'Videos Created',
      clientSatisfaction: 'Client Satisfaction',
      fastestTurnaround: 'Fastest Turnaround',
      acrossIndustries: 'Across all industries',
      consistentlyRated: 'Consistently rated 5-star',
      urgentProjects: 'For urgent projects',
      trustedBy: 'Trusted by businesses worldwide'
    },
    pricing: {
      flexiblePricing: 'Flexible Pricing for Every Business',
      chooseYourPlan: 'Choose Your',
      perfectPlan: 'Perfect Plan',
      subtitle: 'From one-time projects to enterprise solutions. Scale your video creation as your business grows.',
      basic: {
        name: 'Basic',
        price: 15,
        description: 'per video',
        delivery: '7-day delivery ‚Ä¢ 1 revision',
        features: [
          'Single video creation',
          'Basic AI avatar selection',
          'Up to 60 seconds video',
          'Standard script review',
          'Basic editing & effects',
          '7-day delivery',
          '1 revision included'
        ]
      },
      starter: {
        name: 'Starter',
        price: 100,
        description: '/month',
        delivery: '2 videos/week ‚Ä¢ 3-day delivery',
        monthlyVideos: '8 videos per month ‚Ä¢ Save 60% vs Basic',
        popular: 'Most Popular',
        features: [
          '2 videos per week (8/month)',
          'Premium AI avatar library',
          'Up to 3 minutes per video',
          'Script assistance included',
          'Professional editing',
          'Background music & graphics',
          '3-day delivery per video',
          '2 revisions per video',
          'Priority support',
          'Team collaboration tools'
        ]
      },
      enterprise: {
        name: 'Enterprise',
        price: 'Custom',
        description: 'Pricing',
        delivery: 'Custom delivery timeline',
        features: [
          'Unlimited video creation',
          'Custom AI avatar training',
          'Unlimited video length',
          'Dedicated scriptwriting team',
          'Advanced editing & animations',
          'Custom graphics & branding',
          'White-label solutions',
          'API access & integrations',
          '24-hour delivery available',
          'Unlimited revisions',
          'Dedicated account manager',
          'Custom training & onboarding'
        ]
      },
      createVideo: 'Create Video',
      startSubscription: 'Start Subscription',
      contactSales: 'Contact Sales'
    }
  },
  es: {
    nav: {
      home: 'Inicio',
      createVideo: 'Crear Video',
      myOrders: 'Mis Pedidos',
      admin: 'Admin',
      getStarted: 'Comenzar'
    },
    hero: {
      badge: 'Plataforma de Video IA de Nueva Generaci√≥n',
      headline: 'Transforma Ideas en',
      headlineHighlight: 'Historias Visuales',
      subheadline: 'Desde m√≥dulos de entrenamiento hasta demos de productos, crea videos profesionales con IA que involucran, educan y convierten a tu audiencia',
      oneTimeProjects: 'Proyectos √∫nicos desde $15',
      subscriptions: 'Suscripciones para equipos',
      enterprise: 'Soluciones empresariales',
      startCreating: 'Comenzar a Crear Hoy',
      seeInAction: 'Ver Drishya en Acci√≥n',
      videosCreated: 'Videos Creados',
      clientSatisfaction: 'Satisfacci√≥n del Cliente',
      fastestTurnaround: 'Entrega M√°s R√°pida',
      acrossIndustries: 'En todas las industrias',
      consistentlyRated: 'Calificado consistentemente 5 estrellas',
      urgentProjects: 'Para proyectos urgentes',
      trustedBy: 'Confiado por empresas en todo el mundo'
    },
    pricing: {
      flexiblePricing: 'Precios Flexibles para Cada Negocio',
      chooseYourPlan: 'Elige Tu',
      perfectPlan: 'Plan Perfecto',
      subtitle: 'Desde proyectos √∫nicos hasta soluciones empresariales. Escala tu creaci√≥n de videos mientras tu negocio crece.',
      basic: {
        name: 'B√°sico',
        price: 15,
        description: 'por video',
        delivery: 'Entrega en 7 d√≠as ‚Ä¢ 1 revisi√≥n',
        features: [
          'Creaci√≥n de video √∫nico',
          'Selecci√≥n b√°sica de avatar IA',
          'Video de hasta 60 segundos',
          'Revisi√≥n est√°ndar de gui√≥n',
          'Edici√≥n y efectos b√°sicos',
          'Entrega en 7 d√≠as',
          '1 revisi√≥n incluida'
        ]
      },
      starter: {
        name: 'Inicial',
        price: 100,
        description: '/mes',
        delivery: '2 videos/semana ‚Ä¢ Entrega en 3 d√≠as',
        monthlyVideos: '8 videos por mes ‚Ä¢ Ahorra 60% vs B√°sico',
        popular: 'M√°s Popular',
        features: [
          '2 videos por semana (8/mes)',
          'Biblioteca premium de avatares IA',
          'Hasta 3 minutos por video',
          'Asistencia de gui√≥n incluida',
          'Edici√≥n profesional',
          'M√∫sica de fondo y gr√°ficos',
          'Entrega en 3 d√≠as por video',
          '2 revisiones por video',
          'Soporte prioritario',
          'Herramientas de colaboraci√≥n en equipo'
        ]
      },
      enterprise: {
        name: 'Empresarial',
        price: 'Personalizado',
        description: 'Precios',
        delivery: 'Cronograma de entrega personalizado',
        features: [
          'Creaci√≥n ilimitada de videos',
          'Entrenamiento personalizado de avatar IA',
          'Duraci√≥n ilimitada de video',
          'Equipo dedicado de redacci√≥n de guiones',
          'Edici√≥n avanzada y animaciones',
          'Gr√°ficos y marca personalizados',
          'Soluciones de marca blanca',
          'Acceso API e integraciones',
          'Entrega en 24 horas disponible',
          'Revisiones ilimitadas',
          'Gerente de cuenta dedicado',
          'Entrenamiento y incorporaci√≥n personalizada'
        ]
      },
      createVideo: 'Crear Video',
      startSubscription: 'Iniciar Suscripci√≥n',
      contactSales: 'Contactar Ventas'
    }
  },
  fr: {
    nav: {
      home: 'Accueil',
      createVideo: 'Cr√©er une Vid√©o',
      myOrders: 'Mes Commandes',
      admin: 'Admin',
      getStarted: 'Commencer'
    },
    hero: {
      badge: 'Plateforme Vid√©o IA de Nouvelle G√©n√©ration',
      headline: 'Transformez les Id√©es en',
      headlineHighlight: 'Histoires Visuelles',
      subheadline: 'Des modules de formation aux d√©mos de produits, cr√©ez des vid√©os IA professionnelles qui engagent, √©duquent et convertissent votre audience',
      oneTimeProjects: 'Projets uniques √† partir de 15$',
      subscriptions: 'Abonnements pour √©quipes',
      enterprise: 'Solutions entreprise',
      startCreating: 'Commencer √† Cr√©er Aujourd\'hui',
      seeInAction: 'Voir Drishya en Action',
      videosCreated: 'Vid√©os Cr√©√©es',
      clientSatisfaction: 'Satisfaction Client',
      fastestTurnaround: 'Livraison la Plus Rapide',
      acrossIndustries: 'Dans toutes les industries',
      consistentlyRated: 'Not√© constamment 5 √©toiles',
      urgentProjects: 'Pour les projets urgents',
      trustedBy: 'Fait confiance par les entreprises du monde entier'
    },
    pricing: {
      flexiblePricing: 'Tarification Flexible pour Chaque Entreprise',
      chooseYourPlan: 'Choisissez Votre',
      perfectPlan: 'Plan Parfait',
      subtitle: 'Des projets uniques aux solutions d\'entreprise. √âvoluez votre cr√©ation vid√©o √† mesure que votre entreprise grandit.',
      basic: {
        name: 'Basique',
        price: 15,
        description: 'par vid√©o',
        delivery: 'Livraison en 7 jours ‚Ä¢ 1 r√©vision',
        features: [
          'Cr√©ation de vid√©o unique',
          'S√©lection d\'avatar IA basique',
          'Vid√©o jusqu\'√† 60 secondes',
          'R√©vision de script standard',
          '√âdition et effets basiques',
          'Livraison en 7 jours',
          '1 r√©vision incluse'
        ]
      },
      starter: {
        name: 'D√©butant',
        price: 100,
        description: '/mois',
        delivery: '2 vid√©os/semaine ‚Ä¢ Livraison en 3 jours',
        monthlyVideos: '8 vid√©os par mois ‚Ä¢ √âconomisez 60% vs Basique',
        popular: 'Le Plus Populaire',
        features: [
          '2 vid√©os par semaine (8/mois)',
          'Biblioth√®que premium d\'avatars IA',
          'Jusqu\'√† 3 minutes par vid√©o',
          'Assistance de script incluse',
          '√âdition professionnelle',
          'Musique de fond et graphiques',
          'Livraison en 3 jours par vid√©o',
          '2 r√©visions par vid√©o',
          'Support prioritaire',
          'Outils de collaboration d\'√©quipe'
        ]
      },
      enterprise: {
        name: 'Entreprise',
        price: 'Personnalis√©',
        description: 'Tarification',
        delivery: 'Calendrier de livraison personnalis√©',
        features: [
          'Cr√©ation vid√©o illimit√©e',
          'Formation d\'avatar IA personnalis√©e',
          'Dur√©e vid√©o illimit√©e',
          '√âquipe d√©di√©e de r√©daction de scripts',
          '√âdition avanc√©e et animations',
          'Graphiques et branding personnalis√©s',
          'Solutions en marque blanche',
          'Acc√®s API et int√©grations',
          'Livraison en 24h disponible',
          'R√©visions illimit√©es',
          'Gestionnaire de compte d√©di√©',
          'Formation et int√©gration personnalis√©es'
        ]
      },
      createVideo: 'Cr√©er une Vid√©o',
      startSubscription: 'Commencer l\'Abonnement',
      contactSales: 'Contacter les Ventes'
    }
  },
  de: {
    nav: {
      home: 'Startseite',
      createVideo: 'Video Erstellen',
      myOrders: 'Meine Bestellungen',
      admin: 'Admin',
      getStarted: 'Loslegen'
    },
    hero: {
      badge: 'KI-Video-Plattform der N√§chsten Generation',
      headline: 'Verwandeln Sie Ideen in',
      headlineHighlight: 'Visuelle Geschichten',
      subheadline: 'Von Trainingsmodulen bis hin zu Produktdemos - erstellen Sie professionelle KI-Videos, die Ihr Publikum ansprechen, bilden und konvertieren',
      oneTimeProjects: 'Einmalige Projekte ab 15$',
      subscriptions: 'Abonnements f√ºr Teams',
      enterprise: 'Unternehmensl√∂sungen',
      startCreating: 'Heute mit dem Erstellen Beginnen',
      seeInAction: 'Drishya in Aktion Sehen',
      videosCreated: 'Videos Erstellt',
      clientSatisfaction: 'Kundenzufriedenheit',
      fastestTurnaround: 'Schnellste Bearbeitungszeit',
      acrossIndustries: 'Branchen√ºbergreifend',
      consistentlyRated: 'Durchgehend 5-Sterne bewertet',
      urgentProjects: 'F√ºr dringende Projekte',
      trustedBy: 'Vertraut von Unternehmen weltweit'
    },
    pricing: {
      flexiblePricing: 'Flexible Preise f√ºr Jedes Unternehmen',
      chooseYourPlan: 'W√§hlen Sie Ihren',
      perfectPlan: 'Perfekten Plan',
      subtitle: 'Von einmaligen Projekten bis hin zu Unternehmensl√∂sungen. Skalieren Sie Ihre Videoerstellung mit dem Wachstum Ihres Unternehmens.',
      basic: {
        name: 'Basis',
        price: 15,
        description: 'pro Video',
        delivery: '7-Tage Lieferung ‚Ä¢ 1 √úberarbeitung',
        features: [
          'Einzelne Videoerstellung',
          'Basis KI-Avatar Auswahl',
          'Bis zu 60 Sekunden Video',
          'Standard Skript-√úberpr√ºfung',
          'Basis Bearbeitung & Effekte',
          '7-Tage Lieferung',
          '1 √úberarbeitung inklusive'
        ]
      },
      starter: {
        name: 'Starter',
        price: 100,
        description: '/Monat',
        delivery: '2 Videos/Woche ‚Ä¢ 3-Tage Lieferung',
        monthlyVideos: '8 Videos pro Monat ‚Ä¢ Sparen Sie 60% vs Basis',
        popular: 'Am Beliebtesten',
        features: [
          '2 Videos pro Woche (8/Monat)',
          'Premium KI-Avatar Bibliothek',
          'Bis zu 3 Minuten pro Video',
          'Skript-Unterst√ºtzung inklusive',
          'Professionelle Bearbeitung',
          'Hintergrundmusik & Grafiken',
          '3-Tage Lieferung pro Video',
          '2 √úberarbeitungen pro Video',
          'Priorit√§ts-Support',
          'Team-Kollaborations-Tools'
        ]
      },
      enterprise: {
        name: 'Unternehmen',
        price: 'Individuell',
        description: 'Preise',
        delivery: 'Individueller Lieferzeitplan',
        features: [
          'Unbegrenzte Videoerstellung',
          'Individuelles KI-Avatar Training',
          'Unbegrenzte Videol√§nge',
          'Dediziertes Drehbuch-Team',
          'Erweiterte Bearbeitung & Animationen',
          'Individuelle Grafiken & Branding',
          'White-Label L√∂sungen',
          'API-Zugang & Integrationen',
          '24-Stunden Lieferung verf√ºgbar',
          'Unbegrenzte √úberarbeitungen',
          'Dedizierter Account Manager',
          'Individuelles Training & Onboarding'
        ]
      },
      createVideo: 'Video Erstellen',
      startSubscription: 'Abonnement Starten',
      contactSales: 'Vertrieb Kontaktieren'
    }
  }
};

export class I18nService {
  private static instance: I18nService;
  private currentLanguage: string = 'en';
  private listeners: ((language: string) => void)[] = [];

  static getInstance(): I18nService {
    if (!I18nService.instance) {
      I18nService.instance = new I18nService();
    }
    return I18nService.instance;
  }

  constructor() {
    // Load saved language from localStorage
    const savedLanguage = localStorage.getItem('drishya-language');
    if (savedLanguage && this.isLanguageSupported(savedLanguage)) {
      this.currentLanguage = savedLanguage;
    } else {
      // Detect browser language
      const browserLanguage = navigator.language.split('-')[0];
      if (this.isLanguageSupported(browserLanguage)) {
        this.currentLanguage = browserLanguage;
      }
    }
  }

  getCurrentLanguage(): string {
    return this.currentLanguage;
  }

  setLanguage(languageCode: string): void {
    if (this.isLanguageSupported(languageCode)) {
      this.currentLanguage = languageCode;
      localStorage.setItem('drishya-language', languageCode);
      this.notifyListeners();
    }
  }

  isLanguageSupported(languageCode: string): boolean {
    return supportedLanguages.some(lang => lang.code === languageCode);
  }

  translate(key: string): string {
    const keys = key.split('.');
    let value: any = translations[this.currentLanguage];
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        // Fallback to English if translation not found
        value = translations['en'];
        for (const fallbackKey of keys) {
          if (value && typeof value === 'object' && fallbackKey in value) {
            value = value[fallbackKey];
          } else {
            return key; // Return key if no translation found
          }
        }
        break;
      }
    }
    
    return typeof value === 'string' ? value : key;
  }

  addLanguageChangeListener(callback: (language: string) => void): void {
    this.listeners.push(callback);
  }

  removeLanguageChangeListener(callback: (language: string) => void): void {
    this.listeners = this.listeners.filter(listener => listener !== callback);
  }

  private notifyListeners(): void {
    this.listeners.forEach(listener => listener(this.currentLanguage));
  }

  getSupportedLanguages(): Language[] {
    return supportedLanguages;
  }

  getCurrentLanguageInfo(): Language {
    return supportedLanguages.find(lang => lang.code === this.currentLanguage) || supportedLanguages[0];
  }
}

// Hook for React components
export function useTranslation() {
  const i18n = I18nService.getInstance();
  const [currentLanguage, setCurrentLanguage] = React.useState(i18n.getCurrentLanguage());

  React.useEffect(() => {
    const handleLanguageChange = (language: string) => {
      setCurrentLanguage(language);
    };

    i18n.addLanguageChangeListener(handleLanguageChange);
    return () => i18n.removeLanguageChangeListener(handleLanguageChange);
  }, [i18n]);

  const t = React.useCallback((key: string) => i18n.translate(key), [currentLanguage]);
  
  return {
    t,
    currentLanguage,
    setLanguage: (lang: string) => i18n.setLanguage(lang),
    supportedLanguages: i18n.getSupportedLanguages(),
    currentLanguageInfo: i18n.getCurrentLanguageInfo()
  };
}

